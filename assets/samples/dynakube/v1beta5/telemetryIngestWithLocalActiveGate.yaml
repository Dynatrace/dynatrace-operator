apiVersion: dynatrace.com/v1beta5
kind: DynaKube
metadata:
  name: dynakube
  namespace: dynatrace

spec:
  apiUrl: https://ENVIRONMENTID.live.dynatrace.com/api

  # Activate a local in-cluster ActiveGate to ingest telemetry data.
  activeGate:
    capabilities:
      - kubernetes-monitoring

    replicas: 1
    resources:
      requests:
        cpu: 1000m
        memory: 1.5Gi
      limits:
        cpu: 1000m
        memory: 1.5Gi

  # Enable telemetry ingest. Ingested data is sent to the local in-cluster ActiveGate.
  telemetryIngest:

    # All protocols are enabled, you can choose to enable only the ones you need
    protocols:
    - otlp
    - zipkin
    - jaeger
    - statsd

    # Name of the telemetry ingest service that your applications should use.
    # Will result in telemetry-ingest.dynatrace.svc
    serviceName: telemetry-ingest
